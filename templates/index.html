<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <title>Deadlock Toolkit â€” Modern UI</title>

    <link rel="stylesheet" href="{{ url_for('static', filename='styles/style.css') }}">
    <script src="https://d3js.org/d3.v7.min.js"></script>
</head>

<body>

    <header>
        <h1>âš¡ Deadlock Toolkit â€” Interactive OS Simulator</h1>
    </header>

    <div class="grid-container">

        <!-- LEFT PANEL (Controls) -->
        <div class="controls">

            <h2>âš™ï¸ System Controls</h2>

            <button class="btn" onclick="loadState()">ğŸ”„ Load System State</button>
            <button class="btn" onclick="checkSafety()">ğŸ›¡ï¸ Check Safety</button>

            <h3>Request Resources</h3>
            <input id="pid" placeholder="Process ID (0..n-1)">
            <input id="req" placeholder="Request vector (e.g. 1,0,2)">
            <button class="btn" onclick="sendRequest()">ğŸ“¥ Send Request</button>

            <h3>Release Resources</h3>
            <input id="relPid" placeholder="PID">
            <input id="relVec" placeholder="Release vector">
            <button class="btn" onclick="releaseResources()">ğŸ“¤ Release</button>

            <h2>ğŸ§© Deadlock</h2>
            <button class="btn red" onclick="runDeadlock()">ğŸ” Detect Deadlock</button>
            <button class="btn yellow" onclick="autoDeadlock()">âš ï¸ AUTO Deadlock Scenario</button>

            <h3>Recovery</h3>
            <select id="policySelect">
                <option value="lowest_alloc">Lowest Allocation First</option>
            </select>
            <button class="btn green" onclick="recover()">â™»ï¸ Recover</button>

        </div>

        <!-- RIGHT PANEL (Graph + Output) -->
        <div class="visual">

            <h2>ğŸ•¸ Resource Allocation Graph</h2>
            <button class="btn" onclick="renderGraph()">ğŸ¨ Render Graph</button>
            <div id="graph"></div>

            <h2>ğŸ“Š Output</h2>
            <pre id="outputBox"></pre>

        </div>

    </div>

    <!-- JS Files -->
    <script src="{{ url_for('static', filename='js/api.js') }}"></script>
    <script src="{{ url_for('static', filename='js/graph.js') }}"></script>
    <script src="{{ url_for('static', filename='js/main.js') }}"></script>

</body>
</html>
